group 'ARBI print'
version '2.0'

apply plugin: 'java'

sourceCompatibility = 1.8

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath "com.github.jengelman.gradle.plugins:shadow:2.0.1"
    }
}

repositories {
    jcenter()
}

dependencies {

    // https://mvnrepository.com/artifact/com.jcraft/jsch
    compile group: 'com.jcraft', name: 'jsch', version: '0.1.54'

    // https://mvnrepository.com/artifact/com.google.code.gson/gson
    compile group: 'com.google.code.gson', name: 'gson', version: '2.8.2'

    // https://mvnrepository.com/artifact/junit/junit
//    testCompile group: 'junit', name: 'junit', version: '4.12'

}

apply plugin: "com.github.johnrengelman.shadow"

task createProperties {
    doFirst {
        def version = project.version.toString()
        def file = new File("$projectDir/src/main/resources/VERSION.txt")
        file.write(version)
    }
}

jar {
    manifest {
        attributes 'Main-Class': 'com.haselkern.java.arbiprint.Main'
    }
}

shadowJar {
    dependsOn createProperties
    classifier = null
}

sourceSets {
    main {
        java {
            srcDirs 'src'
        }
    }
}
